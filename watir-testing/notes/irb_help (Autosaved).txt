

require 'rubygems'
require 'firewatir'

browser = Watir::Browser.new
browser.goto("#{ENV['MGP_ROOT']}/index.php/admin")


def element_with_text_exists? element, text
  xpath = "//#{element}[.[contains(.,'#{text}')]]"
  case element
    when "span"
      return browser.span(:xpath, xpath).exists?
    else
      raise "element_with_text_exists: #{element} not implemented"
  end
end

http://magento.dan.janrain.com/magento/furniture/living-room/ottoman.html


# sys config
l = browser.link(:xpath,"//a[contains(span, 'Configuration')]")
l.click

# engage config
engage = browser.link(:xpath, "//a[./span[contains(.,'Engage')]]")
engage.click

l = browser.link(:id,"engage_accountdata-head")
l.click

realm = browser.table(:xpath, "//table[./tbody/tr/td[contains(.,'bh-test01.rpxnow.com')]]")
realm.exists?



